<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mimi Downloader</title>
<link href="cdn/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="cdn/jquery-3.2.1.min.js"></script>
<script>if (typeof module === "object") {window.jQuery = window.$ = module.exports;};</script>
<script src="base.js"></script>
<style>
	.checkbox {
		margin: 0px auto !important;
	}
	.info, .download {
		display: none;
		margin-top: 20px;
	}
</style>
</head>
<body>
<div class="container" style="margin: 0 20px 20px 20px;">
	<div class="row">
		<h1>Mimi Downloader</h1>
		<p id="help">欢迎使用米米下载器</p>
	</div>
	
	<div class="row">
		<div class="form-group">
		视频地址
			<input type="text" class="form-control" id="videoUrl"/>
		</div>
	</div>
	
	<div class="row">
		<div class="form-group">
		PlayUrl
			<input type="text" class="form-control" id="playUrl"/>
		</div>
	</div>

	<div class="row">
		<button class="btn btn-success" onclick="getData()">获取下载链接</button>
		<button class="btn btn-default" onclick="about()">关于</button>
	</div>

	<div class="info">
		<div class="row">
			<table class="table table-striped">
				<thead>
					<tr>
						<th>编号</th>
						<th>时长(ms)</th>
						<th>大小(bit)</th>
						<th>选定</th>	
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
	
		<div class="row">
			<div class="form-group">
			下载路径
				<input type="text" class="form-control" id="downloadPath"/>
			</div>
		</div>

		<div class="row">
			<button class="btn btn-success" onclick="download()">下载选中片段</button>
			<button class="btn btn-primary" onclick="selectAll()">全选</button>
			<button class="btn btn-default" onclick="selectReverse()">反选</button>
			<button class="btn btn-danger" onclick="selectNone()">全不选</button>
		</div>
	</div>

	<div class="download">
		
	</div>
</div>

<script>
window.addEventListener("beforeunload", e => {
	if (isDownloading) {
		e.returnValue = false;
		alert("下载时无法退出，请先结束任务");
	}
})
function about() {
	alert("Mimi Downloader")
}
function selectAll() {
	$('input[type="checkbox"]').prop("checked", true);
}
function selectNone() {
	$('input[type="checkbox"]').prop("checked", false);
}
function selectReverse() {
	$('input[type="checkbox"]').each(function () {
		$(this).prop("checked", !$(this).prop("checked"));
	});
}
</script>
</body>
</html>
